<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Calculadora de Probabilidades • Poisson + Mejoras</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Calculadora de Probabilidades • Modelo Mejorado</h1>
      <p class="small">Sistema mejorado con factores de corrección automáticos y modelo Dixon-Coles</p>
    </div>

    <!-- Selección equipos -->
    <div class="grid" style="margin-top:12px">
      <div class="card">
        <h3>Equipos y estadísticas</h3>
        <div class="table-like">
          <div>
            <label>Liga</label>
            <select id="leagueSelect"><option value="">-- Selecciona liga --</option></select>
          </div>
        </div>

        <div class="table-like" style="margin-top:8px">
          <div>
            <label>Equipo Local</label>
            <select id="teamHome"><option value="">-- Selecciona equipo --</option></select>
          </div>
          <div>
            <label>Equipo Visitante</label>
            <select id="teamAway"><option value="">-- Selecciona equipo --</option></select>
          </div>
        </div>

        <div class="sep"></div>

        <div class="table-like">
          <div>
            <label>Pos Local</label><input id="posHome" type="number" value="-" min="1" step="1"/>
          </div>
          <div>
            <label>Pos Visitante</label><input id="posAway" type="number" value="-" min="1" step="1"/>
          </div>
        </div>

        <div class="sep"></div>

        <div class="table-like">
          <div>
            <label>GF local</label><input id="gfHome" type="number" value="1.6" step="0.01" min="0"/>
          </div>
          <div>
            <label>GC local</label><input id="gaHome" type="number" value="1.1" step="0.01" min="0"/>
          </div>
        </div>
        <div class="table-like" style="margin-top:8px">
          <div>
            <label>GF visitante</label><input id="gfAway" type="number" value="1.4" step="0.01" min="0"/>
          </div>
          <div>
            <label>GC visitante</label><input id="gaAway" type="number" value="1.2" step="0.01" min="0"/>
          </div>
        </div>

        <div class="sep"></div>

        <h4>Forma general</h4>
        <div class="table-like" style="margin-top:6px">
          <div class="stat-card" id="formHomeCard">
            <div class="stat-title" id="formHomeTeam">Local: —</div>
            <div class="stat-values" id="formHomeBox">PJ: — | G: — | E: — | P: —</div>
          </div>
          <div class="stat-card" id="formAwayCard">
            <div class="stat-title" id="formAwayTeam">Visitante: —</div>
            <div class="stat-values" id="formAwayBox">PJ: — | G: — | E: — | P: —</div>
          </div>
        </div>

        <div class="sep"></div>

        <div style="display:flex;gap:8px;justify-content:center;flex-wrap:wrap;">
          <button id="recalc" class="btn">Calcular</button>
          <button id="reset" class="btn">Reset valores</button>
          <button id="clearAll" class="btn">Resetear todo</button>
        </div>
      </div>

      <!-- Resultados -->
      <div class="card">
        <h3>Probabilidades</h3>
        <div class="kpis" style="margin-top:6px">
          <div class="tile"><strong id="pHome">—</strong><div class="small">Prob. Local</div></div>
          <div class="tile"><strong id="pDraw">—</strong><div class="small">Prob. Empate</div></div>
          <div class="tile"><strong id="pAway">—</strong><div class="small">Prob. Visitante</div></div>
          <div class="tile"><strong id="pBTTS">—</strong><div class="small">Prob. BTTS</div></div>
          <div class="tile"><strong id="pO25">—</strong><div class="small">Prob. Over 2.5</div></div>
        </div>

        <div class="sep"></div>
        
        <h4>Factores Aplicados</h4>
        <div class="correction-factors">
          <div class="correction-factor">
            <div class="label">Ventaja Local</div>
            <div class="value" id="homeAdvantageFactor">1.00x</div>
          </div>
          <div class="correction-factor">
            <div class="label">Fuerza Relativa</div>
            <div class="value" id="strengthFactor">1.00x</div>
          </div>
          <div class="correction-factor">
            <div class="label">Dixon-Coles</div>
            <div class="value" id="dixonColesFactor">1.00x</div>
          </div>
        </div>
        
        <div class="sep"></div>
        
        <div id="details" class="recs small"></div>

        <div class="sep"></div>

        <div class="abbrev">
          <strong>Guía abreviaturas:</strong> PJ = Partidos Jugados · G = Ganados · E = Empatados · P = Perdidos
        </div>
      </div>
    </div>
  </div>
  <script src="script.js"></script>
</body>
</html>
