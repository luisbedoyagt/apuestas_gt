<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis de Partidos de FUTBOL</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="app-header">
            <h1>Análisis de Partidos de FUTBOL</h1>
        </header>
        
        <main class="main-grid">
            <section class="card event-card">
                <header class="card-header">
                    <i class="fas fa-calendar-alt"></i>
                    <h3>Próximos Eventos</h3>
                </header>
                <div class="card-body">
                    <div class="control-group">
                        <label for="leagueSelect">Selecciona una Liga:</label>
                        <select id="leagueSelect" size="1"></select>
                    </div>
                    <div class="control-group">
                        <label>Selecciona un Evento:</label>
                        <div id="selected-league-events" class="event-list">
                            <div class="event-item placeholder"><span>Selecciona una liga para ver eventos próximos.</span></div>
                        </div>
                        <div id="transition-message" class="transition-message" style="display: none;">
                            <span class="loading-text"></span>
                        </div>
                    </div>
                </div>
            </section>

            <section class="card team-card" id="card-home">
                <header class="card-header">
                    <i class="fas fa-home"></i>
                    <h3>Local</h3>
                </header>
                <div class="card-body">
                    <div class="control-group">
                        <label for="teamHome">Selecciona el Equipo Local:</label>
                        <select id="teamHome"></select>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <span class="stat-label">Posición</span>
                            <span class="stat-value" id="posHome">--</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">Goles Favor</span>
                            <span class="stat-value" id="gfHome">--</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">Goles Contra</span>
                            <span class="stat-value" id="gaHome">--</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">% de Victorias</span>
                            <span class="stat-value" id="winRateHome">--</span>
                        </div>
                    </div>
                    <div id="formHomeBox">
                        <div class="team-details">
                            <div class="stat-section">
                                <span class="section-title">General</span>
                                <div class="stat-metrics">
                                    <span data-stat="pj">PJ: 0</span>
                                    <span data-stat="points">Puntos: 0</span>
                                    <span data-stat="dg">DG: 0</span>
                                </div>
                            </div>
                            <div class="stat-section">
                                <span class="section-title">Local</span>
                                <div class="stat-metrics">
                                    <span data-stat="pjHome">PJ: 0</span>
                                    <span data-stat="winsHome">PG: 0</span>
                                    <span data-stat="dgHome">DG: 0</span>
                                </div>
                            </div>
                            <div class="stat-section">
                                <span class="section-title">Visitante</span>
                                <div class="stat-metrics">
                                    <span data-stat="pjAway">PJ: 0</span>
                                    <span data-stat="winsAway">PG: 0</span>
                                    <span data-stat="dgAway">DG: 0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="card team-card" id="card-away">
                <header class="card-header">
                    <i class="fas fa-plane-departure"></i>
                    <h3>Visitante</h3>
                </header>
                <div class="card-body">
                    <div class="control-group">
                        <label for="teamAway">Selecciona el Equipo Visitante:</label>
                        <select id="teamAway"></select>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <span class="stat-label">Posición</span>
                            <span class="stat-value" id="posAway">--</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">Goles Favor</span>
                            <span class="stat-value" id="gfAway">--</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">Goles Contra</span>
                            <span class="stat-value" id="gaAway">--</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">% de Victorias</span>
                            <span class="stat-value" id="winRateAway">--</span>
                        </div>
                    </div>
                    <div id="formAwayBox">
                        <div class="team-details">
                            <div class="stat-section">
                                <span class="section-title">General</span>
                                <div class="stat-metrics">
                                    <span data-stat="pj">PJ: 0</span>
                                    <span data-stat="points">Puntos: 0</span>
                                    <span data-stat="dg">DG: 0</span>
                                </div>
                            </div>
                            <div class="stat-section">
                                <span class="section-title">Local</span>
                                <div class="stat-metrics">
                                    <span data-stat="pjHome">PJ: 0</span>
                                    <span data-stat="winsHome">PG: 0</span>
                                    <span data-stat="dgHome">DG: 0</span>
                                </div>
                            </div>
                            <div class="stat-section">
                                <span class="section-title">Visitante</span>
                                <div class="stat-metrics">
                                    <span data-stat="pjAway">PJ: 0</span>
                                    <span data-stat="winsAway">PG: 0</span>
                                    <span data-stat="dgAway">DG: 0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="card integrated-card">
                <header class="card-header">
                    <i class="fas fa-brain"></i>
                    <h3>Pronóstico Integrado: Estadísticas + IA</h3>
                </header>
                <div class="card-body">
                    <div id="details">
                        Detalles del Pronóstico
                    </div>
                    <div class="probabilities-grid">
                        <div class="probability-tile">
                            <span class="label">Victoria Local</span>
                            <span class="value" id="pHome">-- <small>(Stats/IA)</small></span>
                        </div>
                        <div class="probability-tile">
                            <span class="label">Empate</span>
                            <span class="value" id="pDraw">-- <small>(Stats/IA)</small></span>
                        </div>
                        <div class="probability-tile">
                            <span class="label">Victoria Visitante</span>
                            <span class="value" id="pAway">-- <small>(Stats/IA)</small></span>
                        </div>
                        <div class="probability-tile">
                            <span class="label">Ambos Anotan</span>
                            <span class="value" id="pBTTS">-- <small>(IA/Stats)</small></span>
                        </div>
                        <div class="probability-tile">
                            <span class="label">Más de 2.5 Goles</span>
                            <span class="value" id="pO25">-- <small>(IA/Stats)</small></span>
                        </div>
                    </div>
                    <div class="recommendation-box">
                        <h4 class="rec-title">Recomendaciones Fusionadas (Top 3)</h4>
                        <div class="rec-suggestion" id="suggestion">
                            <p>Esperando datos...</p>
                        </div>
                    </div>
                    <div id="integrated-prediction">
                        <p>Esperando análisis integrado...</p>
                    </div>
                </div>
            </section>

            <!-- Plantillas -->
            <template id="event-item-template">
                <div class="event-item">
                    <div class="event-content">
                        <div class="team-logo-container">
                            <span class="team-name" data-home-team></span>
                            <img src="" class="team-logo home-logo hidden" alt="">
                            <span class="vs">vs.</span>
                            <img src="" class="team-logo away-logo hidden" alt="">
                            <span class="team-name" data-away-team></span>
                        </div>
                        <span class="event-details" data-datetime></span>
                        <span class="event-details" data-stadium></span>
                    </div>
                </div>
            </template>
            <template id="rec-suggestion-template">
                <div class="rec-suggestion">
                    <h4>Top Recomendaciones</h4>
                    <ul id="rec-list"></ul>
                </div>
            </template>
            <template id="rec-item-template">
                <li class="rec-item">
                    <span class="rec-rank"></span>
                    <span class="rec-bet"></span>
                    <span class="rec-prob"></span>
                </li>
            </template>
            <template id="analysis-template">
                <div class="rec-suggestion">
                    <h4>Análisis del Partido</h4>
                    <ul id="analysis-list">
                        <li class="rec-item">
                            <span class="rec-bet" data-home-justification></span>
                        </li>
                        <li class="rec-item">
                            <span class="rec-bet" data-draw-justification></span>
                        </li>
                        <li class="rec-item">
                            <span class="rec-bet" data-away-justification></span>
                        </li>
                    </ul>
                    <h4>Otras Apuestas</h4>
                    <ul id="other-bets">
                        <li class="rec-item">
                            <span class="rec-bet">Ambos Anotan (Sí)</span>
                            <span class="rec-prob" data-btts></span>
                        </li>
                        <li class="rec-item">
                            <span class="rec-bet">Más de 2.5 Goles</span>
                            <span class="rec-prob" data-o25></span>
                        </li>
                    </ul>
                    <h4>Apuesta Recomendada</h4>
                    <div class="rec-item verdict-item">
                        <span class="rec-bet" data-verdict></span>
                    </div>
                </div>
            </template>
            <template id="stats-only-recs-template">
                <div class="rec-suggestion">
                    <h4>Top Recomendaciones (Estadísticas)</h4>
                    <ul id="stats-recs-list">
                        <li class="rec-item">
                            <span class="rec-rank">1</span>
                            <span class="rec-bet" data-home-bet></span>
                            <span class="rec-prob" data-home-prob></span>
                        </li>
                        <li class="rec-item">
                            <span class="rec-rank">2</span>
                            <span class="rec-bet" data-draw-bet></span>
                            <span class="rec-prob" data-draw-prob></span>
                        </li>
                        <li class="rec-item">
                            <span class="rec-rank">3</span>
                            <span class="rec-bet" data-away-bet></span>
                            <span class="rec-prob" data-away-prob></span>
                        </li>
                    </ul>
                </div>
            </template>
            <template id="stats-only-analysis-template">
                <div class="rec-suggestion">
                    <h4>Análisis Estadístico</h4>
                    <p>No hay datos de IA completos disponibles. Recomendaciones basadas en estadísticas:</p>
                    <ul id="stats-analysis-list">
                        <li class="rec-item">
                            <span class="rec-bet" data-home-stats></span>
                        </li>
                        <li class="rec-item">
                            <span class="rec-bet" data-draw-stats></span>
                        </li>
                        <li class="rec-item">
                            <span class="rec-bet" data-away-stats></span>
                        </li>
                    </ul>
                    <h4>Otras Apuestas</h4>
                    <ul id="stats-other-bets">
                        <li class="rec-item">
                            <span class="rec-bet">Ambos Anotan (Sí)</span>
                            <span class="rec-prob" data-btts-stats></span>
                        </li>
                        <li class="rec-item">
                            <span class="rec-bet">Más de 2.5 Goles</span>
                            <span class="rec-prob" data-o25-stats></span>
                        </li>
                    </ul>
                    <h4>Apuesta Recomendada</h4>
                    <div class="rec-item verdict-item">
                        <span class="rec-bet" data-verdict-stats></span>
                    </div>
                </div>
            </template>
        </main>
        
        <footer class="reset-container">
            <button class="btn btn-secondary" id="reset">Resetear Todo</button>
        </footer>
    </div>
    <script src="script.js"></script>
</body>
</html>
